(window["webpackJsonp"] = window["webpackJsonp"] || []).push([[2],{

/***/ "./src/modules/appointments/components/appointment-editor.tsx":
/*!********************************************************************!*\
  !*** ./src/modules/appointments/components/appointment-editor.tsx ***!
  \********************************************************************/
/*! exports provided: AppointmentEditorPanel */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"AppointmentEditorPanel\", function() { return AppointmentEditorPanel; });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.js\");\n/* harmony import */ var _common_components__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @common-components */ \"./src/common-components/index.ts\");\n/* harmony import */ var _core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @core */ \"./src/core/index.ts\");\n/* harmony import */ var _modules__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @modules */ \"./src/modules/index.ts\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @utils */ \"./src/utils/index.ts\");\n/* harmony import */ var mobx__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! mobx */ \"./node_modules/mobx/lib/mobx.module.js\");\n/* harmony import */ var mobx_react__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! mobx-react */ \"./node_modules/mobx-react/dist/mobx-react.module.js\");\n/* harmony import */ var office_ui_fabric_react__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! office-ui-fabric-react */ \"./node_modules/office-ui-fabric-react/lib/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_8__);\n\n\n\n\n\n\n\n\n\n\n\n\nlet AppointmentEditorPanel = class AppointmentEditorPanel extends react__WEBPACK_IMPORTED_MODULE_8__[\"Component\"] {\n    constructor() {\n        super(...arguments);\n        this.timerInputs = [];\n        this.timeComb = {\n            hours: this.calcTime.hours,\n            minutes: this.calcTime.minutes,\n            am: this.calcTime.am\n        };\n        this.viewWhich = \"details\";\n        this.tabs = [\n            {\n                key: \"details\",\n                title: \"Details\",\n                icon: \"DietPlanNotebook\"\n            },\n            {\n                key: \"treatment\",\n                title: \"Treatment\",\n                icon: \"Cricket\"\n            },\n            {\n                key: \"finance\",\n                title: \"Expenses & Price\",\n                icon: \"AllCurrency\"\n            },\n            {\n                key: \"delete\",\n                title: \"Delete\",\n                icon: \"trash\",\n                hidden: !this.canEdit\n            }\n        ];\n    }\n    get calcTime() {\n        if (!this.props.appointment) {\n            return {\n                hours: 12,\n                minutes: \"00\",\n                am: false\n            };\n        }\n        const timeString = new Date(this.props.appointment.date).toLocaleTimeString(\"en-US\");\n        const obj = {\n            hours: Number(timeString.split(\":\")[0]),\n            minutes: Number(timeString.split(\":\")[1]) < 30 ? \"00\" : \"30\",\n            am: timeString.replace(/[^A-Z]/gi, \"\").toLowerCase() === \"am\"\n        };\n        return obj;\n    }\n    get otherAppointmentsNumber() {\n        const appointment = this.props.appointment;\n        if (!appointment) {\n            return [].length - 1;\n        }\n        return _modules__WEBPACK_IMPORTED_MODULE_3__[\"appointments\"].appointmentsForDay(appointment.date, 0, 0)\n            .filter(a => a._id !== appointment._id).length;\n    }\n    get treatmentOptions() {\n        const list = JSON.parse(JSON.stringify(_modules__WEBPACK_IMPORTED_MODULE_3__[\"treatments\"].docs));\n        if (this.props.appointment &&\n            this.props.appointment.treatmentID.indexOf(\"|\") > -1) {\n            const arr = this.props.appointment.treatmentID.split(\"|\");\n            const _id = this.props.appointment.treatmentID;\n            const type = arr[0];\n            const expenses = Object(_utils__WEBPACK_IMPORTED_MODULE_4__[\"num\"])(arr[1]);\n            list.push(_modules__WEBPACK_IMPORTED_MODULE_3__[\"treatments\"].new({ _id, type, expenses }));\n        }\n        return list;\n    }\n    get canEdit() {\n        return _core__WEBPACK_IMPORTED_MODULE_2__[\"user\"].currentUser.canEditAppointments;\n    }\n    setTimeFromCombination() {\n        if (!this.props.appointment) {\n            return;\n        }\n        if (this.timeComb.hours === 12) {\n            this.timeComb.am = true;\n        }\n        const d = new Date(this.props.appointment.date);\n        d.setHours(this.timeComb.am ? this.timeComb.hours : this.timeComb.hours + 12, Number(this.timeComb.minutes), 0, 0);\n        this.props.appointment.setDate(d.getTime());\n        this.forceUpdate();\n    }\n    render() {\n        return this.props.appointment ? (react__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"](office_ui_fabric_react__WEBPACK_IMPORTED_MODULE_7__[\"Panel\"], { isOpen: !!this.props.appointment, type: office_ui_fabric_react__WEBPACK_IMPORTED_MODULE_7__[\"PanelType\"].medium, closeButtonAriaLabel: \"Close\", isLightDismiss: true, onDismiss: this.props.onDismiss, onRenderNavigation: () => (react__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"](\"div\", { className: \"panel-heading\" },\n                react__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"](_common_components__WEBPACK_IMPORTED_MODULE_1__[\"Row\"], null,\n                    react__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"](_common_components__WEBPACK_IMPORTED_MODULE_1__[\"Col\"], { span: 22 },\n                        react__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"](_common_components__WEBPACK_IMPORTED_MODULE_1__[\"ProfileComponent\"], { name: this.props.appointment.patient.name, onRenderPrimaryText: () => (react__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"](\"div\", null,\n                                react__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"](\"span\", null, this.props.appointment\n                                    .patient.name),\n                                react__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"](\"br\", null),\n                                react__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"](\"i\", { style: { fontSize: 12 } },\n                                    \"Appointment:\",\n                                    \" \",\n                                    (this.props.appointment\n                                        .treatment || {\n                                        type: \"\"\n                                    }).type))), size: 2, avatar: this.props.appointment.patient.avatar\n                                ? _core__WEBPACK_IMPORTED_MODULE_2__[\"imagesTable\"].table[this.props.appointment\n                                    .patient.avatar]\n                                    ? _core__WEBPACK_IMPORTED_MODULE_2__[\"imagesTable\"].table[this.props.appointment\n                                        .patient.avatar]\n                                    : _core__WEBPACK_IMPORTED_MODULE_2__[\"imagesTable\"].fetchImage(this.props.appointment\n                                        .patient.avatar)\n                                : undefined })),\n                    react__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"](_common_components__WEBPACK_IMPORTED_MODULE_1__[\"Col\"], { span: 2, className: \"close\" },\n                        react__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"](office_ui_fabric_react__WEBPACK_IMPORTED_MODULE_7__[\"IconButton\"], { iconProps: { iconName: \"cancel\" }, onClick: () => {\n                                this.props.onDismiss();\n                            } }))),\n                react__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"](_common_components__WEBPACK_IMPORTED_MODULE_1__[\"PanelTabs\"], { items: this.tabs, onSelect: key => (this.viewWhich = key), currentSelectedKey: this.viewWhich }))) },\n            react__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"](\"div\", { className: \"appointment-editor\" },\n                this.viewWhich === \"details\" ? (react__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"](_common_components__WEBPACK_IMPORTED_MODULE_1__[\"SectionComponent\"], { title: Object(_core__WEBPACK_IMPORTED_MODULE_2__[\"text\"])(\"Appointment\") },\n                    react__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"](_common_components__WEBPACK_IMPORTED_MODULE_1__[\"Row\"], { gutter: 12 },\n                        react__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"](_common_components__WEBPACK_IMPORTED_MODULE_1__[\"Col\"], { sm: 12 },\n                            react__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"](\"div\", { className: \"appointment-input date\" },\n                                react__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"](office_ui_fabric_react__WEBPACK_IMPORTED_MODULE_7__[\"DatePicker\"], { label: Object(_core__WEBPACK_IMPORTED_MODULE_2__[\"text\"])(\"Date\"), disabled: !this.canEdit, className: \"appointment-date\", placeholder: Object(_core__WEBPACK_IMPORTED_MODULE_2__[\"text\"])(\"Select a date\"), value: new Date(this.props.appointment.date), onSelectDate: date => {\n                                        if (date) {\n                                            this.props.appointment.setDate(date.getTime());\n                                        }\n                                    }, formatDate: d => Object(_utils__WEBPACK_IMPORTED_MODULE_4__[\"formatDate\"])(d || 0, _modules__WEBPACK_IMPORTED_MODULE_3__[\"setting\"].getSetting(\"date_format\")) }),\n                                react__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"](\"p\", { className: \"insight\" },\n                                    Object(_core__WEBPACK_IMPORTED_MODULE_2__[\"text\"])(\"With\"),\n                                    \" \",\n                                    react__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"](\"span\", { className: \"num-\" +\n                                            this.otherAppointmentsNumber }, this.otherAppointmentsNumber),\n                                    \" \",\n                                    Object(_core__WEBPACK_IMPORTED_MODULE_2__[\"text\"])(\"other appointment\")))),\n                        react__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"](_common_components__WEBPACK_IMPORTED_MODULE_1__[\"Col\"], { sm: 12 },\n                            react__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"](\"div\", { className: \"appointment-input time\" },\n                                react__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"](_common_components__WEBPACK_IMPORTED_MODULE_1__[\"Row\"], { gutter: 12 },\n                                    react__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"](office_ui_fabric_react__WEBPACK_IMPORTED_MODULE_7__[\"Label\"], null, Object(_core__WEBPACK_IMPORTED_MODULE_2__[\"text\"])(\"Time\")),\n                                    react__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"](_common_components__WEBPACK_IMPORTED_MODULE_1__[\"Row\"], { gutter: 0 },\n                                        react__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"](_common_components__WEBPACK_IMPORTED_MODULE_1__[\"Col\"], { span: 8 },\n                                            react__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"](office_ui_fabric_react__WEBPACK_IMPORTED_MODULE_7__[\"Dropdown\"], { options: [\n                                                    12,\n                                                    1,\n                                                    2,\n                                                    3,\n                                                    4,\n                                                    5,\n                                                    6,\n                                                    7,\n                                                    8,\n                                                    9,\n                                                    10,\n                                                    11\n                                                ].map(x => ({\n                                                    key: x.toString(),\n                                                    text: x < 10\n                                                        ? `0${x.toString()}`\n                                                        : x.toString()\n                                                })), selectedKey: this.calcTime.hours.toString(), onChange: (ev, val) => {\n                                                    if (val) {\n                                                        this.timeComb.hours = Number(val.key.toString());\n                                                        this.setTimeFromCombination();\n                                                    }\n                                                } })),\n                                        react__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"](_common_components__WEBPACK_IMPORTED_MODULE_1__[\"Col\"], { span: 8 },\n                                            react__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"](office_ui_fabric_react__WEBPACK_IMPORTED_MODULE_7__[\"Dropdown\"], { options: [\n                                                    \"00\",\n                                                    \"30\"\n                                                ].map(x => ({\n                                                    key: x,\n                                                    text: x\n                                                })), selectedKey: this.calcTime\n                                                    .minutes, onChange: (ev, val) => {\n                                                    if (val) {\n                                                        this.timeComb.minutes = val.key.toString();\n                                                        this.setTimeFromCombination();\n                                                    }\n                                                } })),\n                                        react__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"](_common_components__WEBPACK_IMPORTED_MODULE_1__[\"Col\"], { span: 8 },\n                                            react__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"](office_ui_fabric_react__WEBPACK_IMPORTED_MODULE_7__[\"Dropdown\"], { options: [\n                                                    {\n                                                        text: \"am\",\n                                                        key: \"am\"\n                                                    },\n                                                    {\n                                                        text: \"pm\",\n                                                        key: \"pm\"\n                                                    }\n                                                ], selectedKey: this.calcTime.am\n                                                    ? \"am\"\n                                                    : \"pm\", onChange: (ev, val) => {\n                                                    if (val) {\n                                                        this.timeComb.am =\n                                                            val.key.toString() ===\n                                                                \"am\";\n                                                        this.setTimeFromCombination();\n                                                    }\n                                                } })))),\n                                react__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"](office_ui_fabric_react__WEBPACK_IMPORTED_MODULE_7__[\"Toggle\"], { defaultChecked: this.props.appointment.isDone, onText: Object(_core__WEBPACK_IMPORTED_MODULE_2__[\"text\"])(\"Done\"), offText: Object(_core__WEBPACK_IMPORTED_MODULE_2__[\"text\"])(\"Not done\"), disabled: !this.canEdit ||\n                                        (!this.props.appointment\n                                            .isDone &&\n                                            new Date(this.props.appointment.date).setHours(0, 0, 0, 0) >\n                                                new Date().setHours(0, 0, 0, 0)), onChange: (e, newVal) => {\n                                        this.props.appointment.isDone = newVal;\n                                    } })))),\n                    react__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"](\"div\", { className: \"appointment-input\" },\n                        react__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"](\"label\", null,\n                            Object(_core__WEBPACK_IMPORTED_MODULE_2__[\"text\"])(\"Operating staff\"),\n                            \" \"),\n                        _modules__WEBPACK_IMPORTED_MODULE_3__[\"staff\"].operatingStaff.map(member => {\n                            const checked = this.props.appointment.staffID.indexOf(member._id) > -1;\n                            return (react__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"](office_ui_fabric_react__WEBPACK_IMPORTED_MODULE_7__[\"Checkbox\"], { key: member._id, label: member.name, disabled: !this.canEdit ||\n                                    (!checked &&\n                                        member.onDutyDays.indexOf(new Date(this.props.appointment.date).toLocaleDateString(\"en-us\", {\n                                            weekday: \"long\"\n                                        })) === -1), checked: checked, onChange: (ev, isChecked) => {\n                                    if (isChecked) {\n                                        this.props.appointment.addStaff(member._id);\n                                    }\n                                    else {\n                                        this.props.appointment.removeStaff(member._id);\n                                    }\n                                } }));\n                        })))) : (\"\"),\n                this.viewWhich === \"treatment\" ? (react__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"](_common_components__WEBPACK_IMPORTED_MODULE_1__[\"SectionComponent\"], { title: Object(_core__WEBPACK_IMPORTED_MODULE_2__[\"text\"])(\"Case Details\") },\n                    react__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"](office_ui_fabric_react__WEBPACK_IMPORTED_MODULE_7__[\"TextField\"], { multiline: true, disabled: !this.canEdit, label: Object(_core__WEBPACK_IMPORTED_MODULE_2__[\"text\"])(\"Details\"), value: this.props.appointment.notes, onChange: (e, value) => {\n                            this.props.appointment.notes = value;\n                        } }),\n                    react__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"](\"br\", null),\n                    react__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"](_common_components__WEBPACK_IMPORTED_MODULE_1__[\"Row\"], { gutter: 12 },\n                        react__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"](_common_components__WEBPACK_IMPORTED_MODULE_1__[\"Col\"], { sm: 12 },\n                            react__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"](\"div\", { className: \"appointment-input treatment\" },\n                                react__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"](office_ui_fabric_react__WEBPACK_IMPORTED_MODULE_7__[\"Dropdown\"], { label: Object(_core__WEBPACK_IMPORTED_MODULE_2__[\"text\"])(\"Treatment\"), disabled: !this.canEdit, className: \"treatment-type\", selectedKey: this.props.appointment\n                                        .treatmentID, options: this.treatmentOptions\n                                        .sort((a, b) => a.type.localeCompare(b.type))\n                                        .map(tr => {\n                                        return {\n                                            key: tr._id,\n                                            text: tr.type\n                                        };\n                                    }), onChange: (e, newValue) => {\n                                        this.props.appointment.treatmentID = newValue.key.toString();\n                                    } }))),\n                        react__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"](_common_components__WEBPACK_IMPORTED_MODULE_1__[\"Col\"], { sm: 12 },\n                            react__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"](\"div\", { className: \"appointment-input units-number\" },\n                                react__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"](office_ui_fabric_react__WEBPACK_IMPORTED_MODULE_7__[\"TextField\"], { label: Object(_core__WEBPACK_IMPORTED_MODULE_2__[\"text\"])(\"Units number\"), disabled: !this.canEdit, type: \"number\", value: this.props.appointment.units.toString(), onChange: (e, newValue) => {\n                                        this.props.appointment.units = Object(_utils__WEBPACK_IMPORTED_MODULE_4__[\"num\"])(newValue);\n                                    } }))),\n                        react__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"](_common_components__WEBPACK_IMPORTED_MODULE_1__[\"Col\"], { span: 24 },\n                            \" \",\n                            react__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"](\"div\", { className: \"appointment-input involved-teeth\" },\n                                react__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"](_common_components__WEBPACK_IMPORTED_MODULE_1__[\"TagInputComponent\"], { disabled: !this.canEdit, placeholder: Object(_core__WEBPACK_IMPORTED_MODULE_2__[\"text\"])(\"Involved teeth\"), value: this.props.appointment.involvedTeeth.map(x => ({\n                                        key: x.toString(),\n                                        text: x.toString()\n                                    })), strict: true, options: _modules__WEBPACK_IMPORTED_MODULE_3__[\"ISOTeethArr\"].map(x => {\n                                        return {\n                                            key: x.toString(),\n                                            text: x.toString()\n                                        };\n                                    }), formatText: x => `${x.toString()} - ${Object(_utils__WEBPACK_IMPORTED_MODULE_4__[\"convert\"])(Object(_utils__WEBPACK_IMPORTED_MODULE_4__[\"num\"])(x)).Palmer}`, onChange: newValue => {\n                                        this.props.appointment.involvedTeeth = newValue.map(x => Object(_utils__WEBPACK_IMPORTED_MODULE_4__[\"num\"])(x.key));\n                                    } })))),\n                    _modules__WEBPACK_IMPORTED_MODULE_3__[\"setting\"].getSetting(\"module_prescriptions\") ? (react__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"](\"div\", null,\n                        react__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"](\"div\", { className: \"appointment-input prescription\" },\n                            react__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"](_common_components__WEBPACK_IMPORTED_MODULE_1__[\"TagInputComponent\"], { disabled: !this.canEdit, className: \"prescription\", value: this.props.appointment.prescriptions.map(x => ({\n                                    key: x.id,\n                                    text: x.prescription\n                                })), options: _modules__WEBPACK_IMPORTED_MODULE_3__[\"prescriptions\"].docs.map(this.prescriptionToTagInput), onChange: newValue => {\n                                    this.props.appointment.prescriptions = newValue.map(x => ({\n                                        id: x.key,\n                                        prescription: x.text\n                                    }));\n                                }, strict: true, placeholder: Object(_core__WEBPACK_IMPORTED_MODULE_2__[\"text\"])(\"Prescription\") })),\n                        react__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"](\"div\", { id: \"prescription-items\" },\n                            react__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"](\"div\", { className: \"print-heading\" },\n                                react__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"](\"h2\", null, _core__WEBPACK_IMPORTED_MODULE_2__[\"user\"].currentUser.name),\n                                react__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"](\"hr\", null),\n                                react__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"](\"h3\", null,\n                                    \"Patient:\",\n                                    \" \",\n                                    (this.props.appointment\n                                        .patient ||\n                                        _modules__WEBPACK_IMPORTED_MODULE_3__[\"patients\"].new()).name),\n                                react__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"](_common_components__WEBPACK_IMPORTED_MODULE_1__[\"Row\"], null,\n                                    react__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"](_common_components__WEBPACK_IMPORTED_MODULE_1__[\"Col\"], { span: 12 },\n                                        react__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"](\"h4\", null,\n                                            \"Age:\",\n                                            \" \",\n                                            (this.props\n                                                .appointment\n                                                .patient ||\n                                                _modules__WEBPACK_IMPORTED_MODULE_3__[\"patients\"].new()).age)),\n                                    react__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"](_common_components__WEBPACK_IMPORTED_MODULE_1__[\"Col\"], { span: 12 },\n                                        react__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"](\"h4\", null,\n                                            \"Gender:\",\n                                            \" \",\n                                            (this.props\n                                                .appointment\n                                                .patient ||\n                                                _modules__WEBPACK_IMPORTED_MODULE_3__[\"patients\"].new()).gender\n                                                ? \"Female\"\n                                                : \"Male\"))),\n                                react__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"](\"hr\", null)),\n                            this.props.appointment.prescriptions.map(item => {\n                                return (react__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"](_common_components__WEBPACK_IMPORTED_MODULE_1__[\"Row\"], { key: item.id },\n                                    react__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"](_common_components__WEBPACK_IMPORTED_MODULE_1__[\"Col\"], { span: 20, className: \"m-b-5\" },\n                                        react__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"](_common_components__WEBPACK_IMPORTED_MODULE_1__[\"ProfileSquaredComponent\"], { text: item.prescription.split(\":\")[0], onRenderInitials: () => (react__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"](office_ui_fabric_react__WEBPACK_IMPORTED_MODULE_7__[\"Icon\"], { iconName: \"pill\" })), subText: item.prescription.split(\":\")[1] })),\n                                    react__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"](_common_components__WEBPACK_IMPORTED_MODULE_1__[\"Col\"], { span: 4, style: {\n                                            textAlign: \"right\"\n                                        } }, this.canEdit ? (react__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"](office_ui_fabric_react__WEBPACK_IMPORTED_MODULE_7__[\"IconButton\"], { iconProps: {\n                                            iconName: \"delete\"\n                                        }, onClick: () => {\n                                            this.props.appointment.prescriptions = this.props.appointment.prescriptions.filter(x => x.id !==\n                                                item.id);\n                                        } })) : (\"\"))));\n                            })),\n                        this.props.appointment.prescriptions\n                            .length ? (react__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"](office_ui_fabric_react__WEBPACK_IMPORTED_MODULE_7__[\"DefaultButton\"], { onClick: print, iconProps: { iconName: \"print\" }, text: Object(_core__WEBPACK_IMPORTED_MODULE_2__[\"text\"])(\"Print prescription\") })) : (\"\"))) : (\"\"))) : (\"\"),\n                this.viewWhich === \"finance\" ? (react__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"](_common_components__WEBPACK_IMPORTED_MODULE_1__[\"SectionComponent\"], { title: Object(_core__WEBPACK_IMPORTED_MODULE_2__[\"text\"])(\"Expenses & Price\") },\n                    react__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"](_common_components__WEBPACK_IMPORTED_MODULE_1__[\"Row\"], { gutter: 12 },\n                        react__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"](_common_components__WEBPACK_IMPORTED_MODULE_1__[\"Col\"], { sm: 16 }, _modules__WEBPACK_IMPORTED_MODULE_3__[\"setting\"].getSetting(\"time_tracking\") ? (react__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"](\"div\", { className: \"appointment-input time\" },\n                            react__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"](\"label\", null, Object(_core__WEBPACK_IMPORTED_MODULE_2__[\"text\"])(\"Time (hours, minutes, seconds)\")),\n                            react__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"](office_ui_fabric_react__WEBPACK_IMPORTED_MODULE_7__[\"TextField\"], { className: \"time-input hours\", type: \"number\", disabled: !this.canEdit, value: this.formatMillisecondsToTime(this.props.appointment\n                                    .time).hours, onChange: (e, v) => {\n                                    this.timerInputs[0] = Object(_utils__WEBPACK_IMPORTED_MODULE_4__[\"num\"])(v);\n                                    this.manuallyUpdateTime();\n                                } }),\n                            react__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"](office_ui_fabric_react__WEBPACK_IMPORTED_MODULE_7__[\"TextField\"], { className: \"time-input minutes\", type: \"number\", disabled: !this.canEdit, value: this.formatMillisecondsToTime(this.props.appointment\n                                    .time).minutes, onChange: (e, v) => {\n                                    this.timerInputs[1] = Object(_utils__WEBPACK_IMPORTED_MODULE_4__[\"num\"])(v);\n                                    this.manuallyUpdateTime();\n                                } }),\n                            react__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"](office_ui_fabric_react__WEBPACK_IMPORTED_MODULE_7__[\"TextField\"], { className: \"time-input seconds\", type: \"number\", disabled: !this.canEdit, value: this.formatMillisecondsToTime(this.props.appointment\n                                    .time).seconds, onChange: (e, v) => {\n                                    this.timerInputs[2] = Object(_utils__WEBPACK_IMPORTED_MODULE_4__[\"num\"])(v);\n                                    this.manuallyUpdateTime();\n                                } }),\n                            this.props.appointment.timer ? (react__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"](office_ui_fabric_react__WEBPACK_IMPORTED_MODULE_7__[\"PrimaryButton\"], { iconProps: {\n                                    iconName: \"Timer\"\n                                }, disabled: !this.canEdit, className: \"appendage stop\", text: Object(_core__WEBPACK_IMPORTED_MODULE_2__[\"text\"])(\"Stop\"), onClick: () => {\n                                    const timer = this.props\n                                        .appointment.timer;\n                                    if (timer) {\n                                        clearInterval(timer);\n                                    }\n                                    this.props.appointment.timer = null;\n                                } })) : (react__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"](office_ui_fabric_react__WEBPACK_IMPORTED_MODULE_7__[\"PrimaryButton\"], { iconProps: {\n                                    iconName: \"Timer\"\n                                }, disabled: !this.canEdit, className: \"appendage\", text: Object(_core__WEBPACK_IMPORTED_MODULE_2__[\"text\"])(\"Start\"), onClick: () => {\n                                    this.props.appointment.timer = window.setInterval(() => {\n                                        this.props.appointment.timerAddOneSecond();\n                                    }, _utils__WEBPACK_IMPORTED_MODULE_4__[\"second\"]);\n                                } })),\n                            react__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"](\"p\", { className: \"payment-insight\" },\n                                react__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"](_common_components__WEBPACK_IMPORTED_MODULE_1__[\"TagComponent\"], { text: Object(_core__WEBPACK_IMPORTED_MODULE_2__[\"text\"])(\"Time value\") +\n                                        \": \" +\n                                        _modules__WEBPACK_IMPORTED_MODULE_3__[\"setting\"].getSetting(\"currencySymbol\") +\n                                        Object(_utils__WEBPACK_IMPORTED_MODULE_4__[\"round\"])(this.props\n                                            .appointment\n                                            .spentTimeValue).toString(), type: _common_components__WEBPACK_IMPORTED_MODULE_1__[\"tagType\"].info }),\n                                react__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"](\"br\", null),\n                                react__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"](_common_components__WEBPACK_IMPORTED_MODULE_1__[\"TagComponent\"], { text: Object(_core__WEBPACK_IMPORTED_MODULE_2__[\"text\"])(\"Expenses\") +\n                                        \": \" +\n                                        _modules__WEBPACK_IMPORTED_MODULE_3__[\"setting\"].getSetting(\"currencySymbol\") +\n                                        Object(_utils__WEBPACK_IMPORTED_MODULE_4__[\"round\"])(this.props\n                                            .appointment\n                                            .expenses).toString(), type: _common_components__WEBPACK_IMPORTED_MODULE_1__[\"tagType\"].info })))) : (\"\")),\n                        react__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"](_common_components__WEBPACK_IMPORTED_MODULE_1__[\"Col\"], { sm: 24 },\n                            react__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"](\"div\", { className: \"appointment-input paid\" },\n                                react__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"](_common_components__WEBPACK_IMPORTED_MODULE_1__[\"Row\"], { gutter: 12 },\n                                    react__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"](_common_components__WEBPACK_IMPORTED_MODULE_1__[\"Col\"], { sm: 8 },\n                                        react__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"](office_ui_fabric_react__WEBPACK_IMPORTED_MODULE_7__[\"TextField\"], { type: \"number\", disabled: !this.canEdit, label: Object(_core__WEBPACK_IMPORTED_MODULE_2__[\"text\"])(\"Price\"), value: this.props.appointment.finalPrice.toString(), onChange: (e, newVal) => {\n                                                this.props.appointment.finalPrice = Object(_utils__WEBPACK_IMPORTED_MODULE_4__[\"num\"])(newVal);\n                                            }, prefix: _modules__WEBPACK_IMPORTED_MODULE_3__[\"setting\"].getSetting(\"currencySymbol\") })),\n                                    react__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"](_common_components__WEBPACK_IMPORTED_MODULE_1__[\"Col\"], { sm: 8 },\n                                        react__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"](office_ui_fabric_react__WEBPACK_IMPORTED_MODULE_7__[\"TextField\"], { type: \"number\", disabled: !this.canEdit, label: Object(_core__WEBPACK_IMPORTED_MODULE_2__[\"text\"])(\"Paid\"), value: this.props.appointment.paidAmount.toString(), onChange: (e, newVal) => {\n                                                this.props.appointment.paidAmount = Object(_utils__WEBPACK_IMPORTED_MODULE_4__[\"num\"])(newVal);\n                                            }, prefix: _modules__WEBPACK_IMPORTED_MODULE_3__[\"setting\"].getSetting(\"currencySymbol\") })),\n                                    react__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"](_common_components__WEBPACK_IMPORTED_MODULE_1__[\"Col\"], { sm: 8 },\n                                        react__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"](office_ui_fabric_react__WEBPACK_IMPORTED_MODULE_7__[\"TextField\"], { type: \"number\", disabled: true, label: this.props.appointment\n                                                .outstandingAmount\n                                                ? Object(_core__WEBPACK_IMPORTED_MODULE_2__[\"text\"])(\"Outstanding\")\n                                                : this.props\n                                                    .appointment\n                                                    .overpaidAmount\n                                                    ? Object(_core__WEBPACK_IMPORTED_MODULE_2__[\"text\"])(\"Overpaid\")\n                                                    : Object(_core__WEBPACK_IMPORTED_MODULE_2__[\"text\"])(\"Outstanding\"), value: this.props.appointment\n                                                .outstandingAmount\n                                                ? this.props.appointment.outstandingAmount.toString()\n                                                : this.props\n                                                    .appointment\n                                                    .overpaidAmount\n                                                    ? this.props.appointment.overpaidAmount.toString()\n                                                    : this.props.appointment.outstandingAmount.toString(), prefix: _modules__WEBPACK_IMPORTED_MODULE_3__[\"setting\"].getSetting(\"currencySymbol\") }))),\n                                react__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"](\"p\", { className: \"payment-insight\" },\n                                    react__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"](_common_components__WEBPACK_IMPORTED_MODULE_1__[\"TagComponent\"], { text: Object(_core__WEBPACK_IMPORTED_MODULE_2__[\"text\"])(\"Profit\") +\n                                            \": \" +\n                                            _modules__WEBPACK_IMPORTED_MODULE_3__[\"setting\"].getSetting(\"currencySymbol\") +\n                                            Object(_utils__WEBPACK_IMPORTED_MODULE_4__[\"round\"])(this.props.appointment\n                                                .profit).toString(), type: _common_components__WEBPACK_IMPORTED_MODULE_1__[\"tagType\"].success }),\n                                    react__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"](\"br\", null),\n                                    react__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"](_common_components__WEBPACK_IMPORTED_MODULE_1__[\"TagComponent\"], { text: Object(_core__WEBPACK_IMPORTED_MODULE_2__[\"text\"])(\"Profit percentage\") +\n                                            \": \" +\n                                            Object(_utils__WEBPACK_IMPORTED_MODULE_4__[\"round\"])(this.props.appointment\n                                                .profitPercentage *\n                                                100).toString() +\n                                            \"%\", type: _common_components__WEBPACK_IMPORTED_MODULE_1__[\"tagType\"].success }))))))) : (\"\"),\n                this.viewWhich === \"delete\" ? (react__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"](\"div\", null,\n                    react__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"](\"br\", null),\n                    react__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"](office_ui_fabric_react__WEBPACK_IMPORTED_MODULE_7__[\"MessageBar\"], { messageBarType: office_ui_fabric_react__WEBPACK_IMPORTED_MODULE_7__[\"MessageBarType\"].warning }, Object(_core__WEBPACK_IMPORTED_MODULE_2__[\"text\"])(\"Are you sure you want to delete this appointment?\")),\n                    react__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"](\"br\", null),\n                    react__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"](office_ui_fabric_react__WEBPACK_IMPORTED_MODULE_7__[\"PrimaryButton\"], { className: \"delete\", iconProps: {\n                            iconName: \"delete\"\n                        }, text: Object(_core__WEBPACK_IMPORTED_MODULE_2__[\"text\"])(\"Delete\"), onClick: () => {\n                            _modules__WEBPACK_IMPORTED_MODULE_3__[\"appointments\"].delete(this.props.appointment._id);\n                        } }))) : (\"\"),\n                react__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"](\"br\", null),\n                react__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"](\"br\", null),\n                react__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"](\"br\", null)))) : (react__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"](\"div\", null));\n    }\n    formatMillisecondsToTime(ms) {\n        const msInSecond = 1000;\n        const msInMinute = msInSecond * 60;\n        const msInHour = msInMinute * 60;\n        const hours = Math.floor(ms / msInHour);\n        const minutes = Math.floor((ms % msInHour) / msInMinute);\n        const seconds = Math.floor(((ms % msInHour) % msInMinute) / msInSecond);\n        return {\n            hours: padWithZero(hours),\n            minutes: padWithZero(minutes),\n            seconds: padWithZero(seconds)\n        };\n        function padWithZero(n) {\n            return n > 9 ? n.toString() : \"0\" + n.toString();\n        }\n    }\n    manuallyUpdateTime() {\n        const msInSecond = 1000;\n        const msInMinute = msInSecond * 60;\n        const msInHour = msInMinute * 60;\n        const hours = this.timerInputs[0];\n        const minutes = this.timerInputs[1];\n        const seconds = this.timerInputs[2];\n        if (isNaN(hours) || isNaN(minutes) || isNaN(seconds)) {\n            return;\n        }\n        this.props.appointment.time =\n            hours * msInHour + minutes * msInMinute + seconds * msInSecond;\n    }\n    prescriptionToTagInput(p) {\n        return {\n            key: p._id,\n            text: `${p.name}: ${p.doseInMg}${Object(_core__WEBPACK_IMPORTED_MODULE_2__[\"text\"])(\"mg\")} ${p.timesPerDay}X${p.unitsPerTime} ${Object(_core__WEBPACK_IMPORTED_MODULE_2__[\"text\"])(p.form)}`\n        };\n    }\n};\ntslib__WEBPACK_IMPORTED_MODULE_0__[\"__decorate\"]([\n    mobx__WEBPACK_IMPORTED_MODULE_5__[\"observable\"]\n], AppointmentEditorPanel.prototype, \"timerInputs\", void 0);\ntslib__WEBPACK_IMPORTED_MODULE_0__[\"__decorate\"]([\n    mobx__WEBPACK_IMPORTED_MODULE_5__[\"observable\"]\n], AppointmentEditorPanel.prototype, \"timeComb\", void 0);\ntslib__WEBPACK_IMPORTED_MODULE_0__[\"__decorate\"]([\n    mobx__WEBPACK_IMPORTED_MODULE_5__[\"observable\"]\n], AppointmentEditorPanel.prototype, \"viewWhich\", void 0);\ntslib__WEBPACK_IMPORTED_MODULE_0__[\"__decorate\"]([\n    mobx__WEBPACK_IMPORTED_MODULE_5__[\"computed\"]\n], AppointmentEditorPanel.prototype, \"calcTime\", null);\ntslib__WEBPACK_IMPORTED_MODULE_0__[\"__decorate\"]([\n    mobx__WEBPACK_IMPORTED_MODULE_5__[\"computed\"]\n], AppointmentEditorPanel.prototype, \"otherAppointmentsNumber\", null);\ntslib__WEBPACK_IMPORTED_MODULE_0__[\"__decorate\"]([\n    mobx__WEBPACK_IMPORTED_MODULE_5__[\"computed\"]\n], AppointmentEditorPanel.prototype, \"treatmentOptions\", null);\ntslib__WEBPACK_IMPORTED_MODULE_0__[\"__decorate\"]([\n    mobx__WEBPACK_IMPORTED_MODULE_5__[\"computed\"]\n], AppointmentEditorPanel.prototype, \"canEdit\", null);\nAppointmentEditorPanel = tslib__WEBPACK_IMPORTED_MODULE_0__[\"__decorate\"]([\n    mobx_react__WEBPACK_IMPORTED_MODULE_6__[\"observer\"]\n], AppointmentEditorPanel);\n\n\n\n//# sourceURL=webpack:///./src/modules/appointments/components/appointment-editor.tsx?");

/***/ })

}]);